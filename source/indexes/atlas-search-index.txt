.. _ruby-atlas-search-index:

====================
Atlas Search Indexes
====================

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 1
   :class: singlecol

.. facet::
   :name: genre
   :values: reference

.. meta::
   :keywords: index, query, optimization, efficiency

Overview
--------

:atlas:`Atlas Search </atlas-search>` enables you to perform full-text searches on
collections hosted on MongoDB Atlas. With Atlas Search indexes, you can specify the 
behavior of the search and which fields to index.

You can call the following database commands to manage you Atlas Search indexes:
.. revise 
- ``createSearchIndexes``
- ``dropSearchIndex``
- ``updateSearchIndex``

The following sections provide code examples that demonstrate how to use
each of the preceding commands.

.. _ruby-atlas-search-index-create:

Create a Search Index
---------------------

To create one or more Atlas Search indexes, use the ``search_indexes#create_one`` 
or the ``search_indexes#create_many`` methods. The methods will return immediately,
while the indexes are asynchronously created in the background.

The following code example shows how to create an Atlas Search index by passing
an index definition and an optional name for the index:

.. literalinclude:: /includes/indexes/atlas-search-index.rb
   :language: ruby
   :start-after: start-create-search-index
   :end-before: end-create-search-index

You can use ``search_indexes#create_many`` to create multiple Atlas Search indexes by 
passing an array of index specifications. Each index specification should include an index key,
which defines the index, and a name key to specify the index name. The following 
code example shows how to create multiple search indexes:

.. literalinclude:: /includes/indexes/atlas-search-index.rb
   :language: ruby
   :start-after: start-create-multiple-search-indexes
   :end-before: end-create-multiple-search-indexes

For longer index definitions, it is helpful to define the index definitions outside 
of the method call. To learn more about the syntax of index definitions, see the 
:atlas:`Review Atlas Search Index Syntax </atlas-search/index-definitions>` 
guide in the Atlas manual.

.. note:: Atlas Vector Search Indexes

    You can also use the ``createSearchIndexes`` database command to create 
    Atlas Vector Search Indexes. Atlas Vector Search enables you to perform 
    semantic searches on vector embeddings stored in MongoDB Atlas. To learn 
    more about this feature, see the :atlas:`Atlas Vector Search Overview
    </atlas-vector-search/vector-search-overview/>`.

Update a Search Index
---------------------

To update an Atlas Search index, use the ``search_indexes#update_one`` method.

To update an index, you must provide a new index definition. You must specify
the index you want to update by using either the``name`` or ``id`` of the index. 
The following code shows how to update a search index:

.. literalinclude:: /includes/indexes/atlas-search-index.rb
   :language: ruby
   :start-after: start-update-search-indexes
   :end-before: end-update-search-indexes

Delete a Search Index
---------------------

To delete an Atlas Search index, use the ``search_indexes#drop_one`` method.

To delete an index, you must provide the ``id`` or ``name`` of the index. The following 
code shows how to delete a search index from a collection:

.. literalinclude:: /includes/indexes/atlas-search-index.rb
   :language: ruby
   :start-after: start-drop-search-index
   :end-before: end-drop-search-index

To learn more about the syntax for the ``dropSearchIndex`` database command,
see the :manual:`dropSearchIndex </reference/command/dropSearchIndex/>`
reference in the {+mdb-server+} manual.

List Search Indexes
-------------------

You can use the ``search_indexes`` object to list the entire index specification 
of each index:

.. literalinclude:: /includes/indexes/atlas-search-index.rb
   :language: ruby
   :start-after: start-list-entire-spec
   :end-before: end-list-entire-spec

To list individual fields in the index specification for each index, iterate
over the ``search_indexes`` object:

.. literalinclude:: /includes/indexes/atlas-search-index.rb
   :language: ruby
   :start-after: start-list-certain-elements
   :end-before: end-list-certain-elements

Additional Information
----------------------

To learn more about MongoDB Atlas Search, see the 
:atlas:`Atlas Search </atlas-search/atlas-search-overview/>` documentation.

API Documentation
~~~~~~~~~~~~~~~~~

To learn more about the {+driver-short+} methods used in this guide, see the following API documentation:
